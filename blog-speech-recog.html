<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeffrey Popek Blog - Speech Recognition</title>
    <link href="https://unpkg.com/lucide-css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    
    <!-- Google Fonts - Kanit -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">

    <link href="styles.css" rel="stylesheet">
    
    
    <link rel="icon" type="image/png" href="assets/favicon.webp">

    
    <style>
         /* Add to style section */
         .page-background {
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('/assets/ds_background.png');
            background-color: #2c2c2c;
            min-height: 100vh;
            padding-top: 60px;
        }

        .content-wrapper {
            background-color: #00000059;
            max-width: 2000px;
            margin: 0 auto;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            min-height: 100vh;

            /* mask-image: radial-gradient(circle, black, black 65%, transparent 85%); */
        }

        .project-header {
            padding-top: 40px;
            padding-bottom: 0;
            text-align: center;
            background: #f8f8f8;
        }

        .project-header h1 {
            font-size: 3rem;
            margin-bottom: 0rem;
            font-family: 'Lato', sans-serif;
            font-weight: 700;  /* Bold */
        }

        .project-content h2 {
            padding-bottom: 0rem; /* Adds space below "Technical Achievements" */
            font-family: 'Lato', sans-serif;
            font-weight: 700;  /* Bold */
            font-size: xx-large;
        }

        .project-content h3 {
            padding-bottom: 0rem; /* Adds space below "Technical Achievements" */
            padding-top: 3rem;
            font-family: 'Lato', sans-serif;
            font-weight: 700;  /* Bold */
            font-size: x-large;
        }

        .project-content p {
            padding-top: 1rem; /* Adds space below "Technical Achievements" */
            padding-bottom: 1rem; /* Adds space below "Technical Achievements" */
            font-family: 'Lato', sans-serif;
            font-weight: 400;  /* Regular */
            line-height: 1.6; /* Adds space between lines */
            font-size: large;
        }

        a {
            font-family: 'Lato', sans-serif;
            font-weight: 400;  /* Regular */
            text-decoration: none; /* Optional: removes underline from links */
            font-size: large;
            padding-top: 1rem;
            padding-bottom: 1rem;
        }



        body {
            font-family: 'Poppins', sans-serif;
            color: white;
        }

        .project-content {
            max-width: 1000px;
            margin: 0 auto;
            padding: 4rem 2rem;
            text-align: center;
            

            margin-top: 10; /* Ensure no extra spacing */
            padding-top: 10; /* Remove any padding pushing it down */
        }

        .project-image {
            width: 80%;
            height: 80%;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 2rem;
            margin-top: 2rem;
        }

        .project-info-box {
            background: rgba(46, 46, 46, 0.313);
            border-radius: 8px;
            padding: 2rem;
            
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            align-items: center;

            font-family: 'Lato', sans-serif;
            font-weight: 300; /* Bold */

            width: 400px;
            margin: 0 auto; /* Centers it horizontally */
            margin-top: 2rem;
        }

        /* Apply the font to individual info-items if needed */
.project-info-box .info-item {
    font-family: 'Lato', sans-serif;
    font-weight: 400;
}

/* Apply the font to the span text */
.project-info-box .info-item span {
    font-family: 'Lato', sans-serif;
    font-weight: 400;
}

        .info-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .info-item i {
            color: var(--purple);
            width: 20px;
            height: 20px;
        }

        .project-description h2 {
            color: var(--purple);
            margin-bottom: 1rem;
        }

        .project-content h2 {
            color: var(--white);
            margin-bottom: 0.5rem;
            margin-top: 1rem;
        }

        .project-description p {
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .info-item i {
    color: white !important;
}

i {
    margin-right: 8px; /* Adds space between the icon and text */
        }

        a i, .fa-github {
    font-size: 2rem; /* Adjust size */
    margin-right: 5px; /* Space between icon and text */
}

a:hover i, a:hover .fa-github {
    color: purple; /* Change color on hover */
}

a {
    font-size: 1.2rem; /* Makes text bigger */
    text-decoration: none; /* Removes underline */
}




.about-cta {
            display: inline-block;
            margin-top: 1rem;
            margin-right: 10px;
            padding: 0.75rem 1.5rem;
            background-color: var(--purple);
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-weight: 500;
            transition: background-color 0.2s ease;
        }

        .about-cta:hover {
            background-color: var(--purple-hover);
        }


        .about-cta {
            display: inline-block;
            margin-top: 1rem;
            margin-right: 10px;
            padding: 0.75rem 1.5rem;
            background-color: var(--purple);
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-weight: 500;
            transition: background-color 0.2s ease;
        }

        .about-cta:hover {
            background-color: var(--purple-hover);
        }

/* Contact Section */
.contact {
            padding: 4rem 2rem;
            background: none;
            text-align: center;
            color: white;
            font-size: 30px;
        }

        .contact-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 2rem;
            color: white;
            font-size: 20px;
        }

        .contact-links a {
            color: var(--purple);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: white;
        }

        .contact-links a:hover {
            color: #b847ec; /* Changes text color on hover */
            text-shadow: 0 0 10px #ffffff00; /* Adds a glow effect */
        }
        

        .contact h2 {
    text-align: center;
    position: relative;
    padding-bottom: 10px; /* Space between text and line */
}

.contact h2::after {
    content: "";
    display: block;
    width: 50%; /* Adjust width as needed */
    height: 2px; /* Line thickness */
    background-color: white; /* Adjust color */
    margin: 10px auto 0; /* Center the line */
}

.contact h3 {
    padding-top: 0.5rem;
    font-size: 25px;
}

        
    </style>
</head>
<body>
    <nav>
        <div class="nav-content">
            <div class="nav-brand">
                <h1>Jeffrey Popek</h1>
                <p>Game Programmer</p>
            </div>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <div class="dropdown">
                    <a href="#">Projects</a>
                    <div class="dropdown-content">
                        <a href="poly-vinyl-pests.html">Poly-Vinyl Pests!</a>
                        <a href="liminal-detective.html">Liminal Detective</a>
                        <a href="suzume-portals.html">Suzume Portals</a>
                        <a href="holly-jolly-engine.html">Holy Jolly Engine</a>
                    </div>
                </div>
                <a href="blog.html">Blog</a>
                <a href="assets/JeffreyPopek_Resume.pdf" target="_blank">Resume</a>
                <!-- <a href="https://github.com/JeffreyPopek" target="_blank">Github </a> -->
            </div>
        </div>
    </nav>

    <div class="page-background">
        <div class="content-wrapper">


            <div class="project-content">
                <h2>Speech Recognition in Unity</h2>

                <div class="project-info-box">
                    <div class="info-item">
                        <span><i class="fa-solid fa-clock"></i> March 19, 2024</span>
                    </div>

                    <div class="info-item">
                        <span><i class="fa-solid fa-wrench"></i> Tools: Unity, HuggingFace</span>
                    </div>
                </div>

                <div class="project-description">
                    <h2>Introduction</h2>
                    
                    <p>
                        In this exploration I wanted to test out using my voice as an input. After a bit of research I determined that I would try two different methods of implementation: using an online ai api call to convert a voice clip to text, and using the Microsoft phrase recognizer. Both methods had their pros and cons for usage and implementation.
                    </p>
                    <p>
                    The goal of this project was to have a system that used my voice command to cast a corresponding spell in game. I wanted to base this system off the many wizards and spellcasters in games and movies. I’ve always enjoyed when authors put extra effort into fleshing out their magic system and making each spell have its own unique chant/incantation.
                    </p>

                    <a href="https://github.com/JeffreyPopek/Incantation" target="_blank" class="about-cta">GitHub</a>

                </div>

                <div class="project-content">
                    <h2>Implementation 1</h2>
                    <p>
                        The first implementation of this system used a combination of an online AI, 
                        <a href="https://huggingface.co/" target="_blank">HuggingFace</a>, to turn a wav file into a string and Levenshtein’s distance to determine which incantation was said.
                    </p>
                    

                    <p>
                        The first step to setting up this system is getting a voice recording from the user and getting a string of what the user said. For this I used a HuggingFace API call to get back a string from a wav file. So the steps are: get voice recording, convert file to a .wav file, send .wav file to HuggingFace to convert to string, then return the result from HuggingFace.
                    </p>
                
                    <img src="/assets/blog-posts/speech-recog/speech_code.png" alt="Technical Achievements" class="project-image">
                
                    <p>
                        The next step is to determine which incantation was said with this string. With the string we got from HuggingFace we can compare it to a list of other strings with the correct incantations and pick the one that matches the most. To find a matching string we can use Levenshtein distance to check for the best match among all incantations. In short Levenshtein distance compares two strings and will return a value; the lower the value the closer the strings are to matching</p>

                    <p>
                        In this example we have the dictionary of incantations and the spell name. When we cast a spell it will get the string of what we said and compare it to this dictionary and return the spell name. Then in a separate function it will cast the spell and do its effects. 
                    </p>

                    <img src="/assets/blog-posts/speech-recog/incant.png" alt="Technical Achievements" class="speech-image">

                    
                    

                    <p>
                        To start comparing we first need to set the current spell to null so if none of the incantations match enough then we do nothing. Next we can set a threshold for the error tolerance. This threshold is used to allow some error for when the user may be slightly off in the incantations and any small errors HuggingFace may have returned. You can change the threshold to allow the said incantation to match the true incantation less. Keeping the threshold low will make it so the user doesn’t just say anything close to the incantation.
                    </p>

                    <img src="/assets/blog-posts/speech-recog/incantation_flowchart.png" alt="Technical Achievements" class="project-image">

                
                    <p>Here is a demo of the spell casting working</p>

                    <div class="video-container">
                        <iframe width="100%" height="500" src="https://www.youtube.com/embed/8N1MoSsBJqk?si=0mXwbMFLZ-S3yT8W" frameborder="0" allowfullscreen></iframe>
                    </div>



                    </div>

                <div class="project-content">
                    <h2>Implementation 2</h2>
                    <p>The second implementation of this system used the Microsoft phrase recognizer in Unity to get audio and compare them to a list of phrases/words. </p>
                

                    <p>To set up our system we first need to define what phrases should be recognized. To do this we create and .xml file and put all our phrases into it like this:
                    </p>
                    <img src="/assets/blog-posts/speech-recog/xml.png" alt="a" class="project-image">
               
                    <p>
                        Next we need to reference the Microsoft speech module in our script at the top. Now we can set up our functions and grammar recognizer. First we need to create a variable at the top of the type GrammarRecognizer. Then in the start method we can initialize it. Now we need to create a function called "OnPhaseRecognized". This function will be called when a phrase that is in our XML file is said. With this function we now want to bind the event of OnPhraseRecognized in Grammar Recognizer to this event.
                    </p>
                    <img src="/assets/blog-posts/speech-recog/start_grammer.png" alt="a" class="project-image">

               
                    <p>
                        Now that we set up our phrases and grammar recognizers we can add some logic in the update to start listening when the user presses the button and start trying out the speech recognition.                    </p>
                
                        <div class="video-container">
                            <iframe width="100%" height="500" src="https://www.youtube.com/embed/r2u9vJ7S7zU?si=XorrwDtD-1-Sfx7I" frameborder="0" allowfullscreen></iframe>
                        </div>

                    </div>


                <div class="project-content">
                    <h2>Pros and Cons</h2>

                    <p>
                        For the first implementation method, HuggingFace API + Levenshtein distance, it is more flexible since we can adjust the threshold and allow more user error. The main con for the implementation is it is reliant on an API call which cannot work without an internet connection. 
                    </p>
                
                    <p>
                        The pros of the second implementation method is it is much easier to get started compared to using the other method. The cons is that you are limited to what phrases you say and the system will not tolerate it if the user says anything else. Although this voice recognition is very accurate since it is supported by Microsoft there is still room for error. This voice recognition technology is used in Microsoft features such as Cortona. 
                    </p>

                          </div>


                <div class="project-content">
                    <h2>What I Learned</h2>
                    <p>In this exploration I learned more about using different inputs for Unity. In the future I would love to further explore this concept and possibly make a game with voice as the main input action. This exploration also required a lot of digging since the documentation on the Microsoft grammar recognizers was not easily accessible. I had a lot of fun stringing together multiple techniques to make the voice input work.
                    </p>
                
                </div>

                <section class="contact">
                    <h2>Contact Me</h2>
                    <h3>jeffreypopek@gmail.com</h3>
                    <div class="contact-links">
                            <a href="https://www.linkedin.com/in/jeffreypopek/" target="_blank" class="about-cta">LinkedIn</a>
                            <a href="https://github.com/JeffreyPopek" target="_blank" class="about-cta">Github</a>
                            <a href="https://jeffreypopek.itch.io/" target="_blank" class="about-cta">Itch.io</a>
                            <a href="/assets/JeffreyPopek_Resume.pdf" target="_blank" class="about-cta">Resume</a>
                       </div>
                </section>

                <!-- DO NOT USE OR DELETE -->
                <!-- <div class="project-content">
                    <h2>Contributions</h2>
                    <p></p>
                
                    <img src="/assets/pvp/pvpGameLoopDiagram.png" alt="Technical Achievements" class="project-image">
                </div> -->

                   
            </div>
        </div>
    </div>
</body>
</html>

